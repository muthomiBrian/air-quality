"use strict";function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var s,c=e[Symbol.iterator]();!(r=(s=c.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}return n}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var Api=function(){function e(){_classCallCheck(this,e),this.urls={}}return _createClass(e,[{key:"loadLang",value:function(e){var t=_slicedToArray(e,2),n=t[0],r=t[1];this.urls[n]=r}},{key:"getData",value:function(e){var t=this.urls[e];return void 0===t?new Promise(function(e){e({"no-data":!0})}):fetch(t).then(function(e){return e.json()})}}]),e}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var ArticleInfo=function(){function e(t){_classCallCheck(this,e),this.div=t,this.byline="",this.date="",this.category="",this.categoryUrl=""}return _createClass(e,[{key:"setArticleInfo",value:function(e){!0!==e["no-data"]&&(this.byline=e["article-info_1_byline"],this.date=e["article-info_1_date"],this.category=e["article-info_1_category"],this.categoryUrl=e["article-info_1_category_url"],this.render())}},{key:"render",value:function(){var e=document.createElement("div"),t=document.createElement("p"),n=document.createElement("span"),r=document.createElement("a");e.classList.add("article-info"),t.classList.add("byline"),n.classList.add("date"),t.innerHTML=this.byline,n.innerHTML="".concat(this.date," | "),r.innerHTML=this.category,r.href=this.categoryUrl,e.appendChild(t),e.appendChild(n),e.appendChild(r),this.div.appendChild(e)}}]),e}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var Compare=function(){function e(){_classCallCheck(this,e),this.cities={},this.method="",this.title="",this.cityEnum={}}return _createClass(e,[{key:"setCompare",value:function(e){var t=this;this.method=e["compare-tabs_1_method"],this.title=e["compare-tabs_1_title"],Object.keys(e).forEach(function(n){if(n.includes("compare-tabs_1_city")){var r=n.match(/[0-9]+/g)[1];if(n.includes("name")){var a=e[n];t.cityEnum[r]=a,t.cities[a]={name:a}}if(n.includes("aqi")){var i=t.cityEnum[r];t.cities[i].aqi=e[n]}if(n.includes("cigg")){var s=t.cityEnum[r];t.cities[s].cigg=e[n]}}})}},{key:"search",value:function(e){return Object.keys(this.cities).filter(function(t){return t.toLowerCase().startsWith(e.toLowerCase())})}},{key:"selectCity",value:function(e){return this.cities[e]}}]),e}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var Hero=function(){function e(t){_classCallCheck(this,e),this.title="",this.imageUrl="",this.div=t}return _createClass(e,[{key:"setHero",value:function(e){if(!0===e["no-data"])return this.title="Sorry we can\t find the page you are looking for right now.",this.render404(),void this.renderTitle();this.title=e.hero_1_title,this.imageUrl=e.hero_1_image,this.render()}},{key:"render",value:function(){this.div.innerHTML="",this.renderImage(),this.renderTitle()}},{key:"renderImage",value:function(){var e=document.createElement("img"),t=document.createElement("div");e.alt="Smog",e.src=this.imageUrl,t.classList.add("hero-image-container"),e.classList.add("hero-image"),t.appendChild(e),this.div.appendChild(t)}},{key:"renderTitle",value:function(){var e=document.createElement("h1");e.innerHTML=this.title,e.classList.add("hero-title"),this.div.appendChild(e)}},{key:"render404",value:function(){var e=document.createElement("div"),t=document.createElement("p");t.innerHTML="404",e.classList.add("hero-404-container"),t.classList.add("hero-404"),e.appendChild(t),this.div.appendChild(e)}}]),e}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var Interactive=function(){function e(t,n){_classCallCheck(this,e),this.compare=n,this.leading=t}return _createClass(e,[{key:"refreshInteractive",value:function(){this.render()}},{key:"render",value:function(){console.log("rendered")}},{key:"renderName",value:function(){}},{key:"renderCigg",value:function(){}},{key:"renderPm",value:function(){}},{key:"renderCities",value:function(){}}]),e}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var LanguageSelect=function(){function e(t,n){_classCallCheck(this,e),this.api=t,this.subscribers=[],this.data={},this.div=n}return _createClass(e,[{key:"getData",value:function(e){var t=this;return this.api.getData(e).then(function(e){return t.data=e,t.send(),e})}},{key:"subscribe",value:function(e,t){this.subscribers.push({fn:e,context:t})}},{key:"send",value:function(){var e=this;this.subscribers.forEach(function(t){t.fn.call(t.context,e.data)})}},{key:"render",value:function(){var e=this,t=document.createElement("div");t.classList.add("language-select");var n=document.createElement("p");n.innerHTML="Select your prefered reading language.",t.appendChild(n);var r=document.createElement("button");r.innerHTML="English",r.addEventListener("click",function(){e.getData("english")}),t.appendChild(r);var a=document.createElement("button");a.innerHTML="Hindi",a.addEventListener("click",function(){e.getData("hindi")}),t.appendChild(a),this.div.appendChild(t)}}]),e}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var Paragraphs=function(){function e(t,n,r){_classCallCheck(this,e),this.div=t,this.paragraphs=[],this.leadingPara=n,this.subHeadings=r}return _createClass(e,[{key:"setPara",value:function(e){var t=this;!0!==e["no-data"]&&(Object.keys(e).forEach(function(n){if("p_"===n.slice(0,2)){var r=Number.parseInt(n.match(/[0-9]*/g)[2],10);t.paragraphs[r-1]=e[n]}}),this.render())}},{key:"render",value:function(){var e=this,t=0;this.paragraphs.forEach(function(n){var r=document.createElement("p");r.innerHTML=n,r.classList.add("para"),n===e.paragraphs[e.leadingPara]&&r.classList.add("leading"),e.subHeadings.includes(t)&&r.classList.add("subheading"),e.div.appendChild(r),t+=1})}}]),e}();"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("/sw.js").then(function(){console.log("Service worker registration successful.")},function(e){console.log(e),console.log("Service worker registration failed.")})});var api=new Api;api.loadLang(["english","./data/english.json"]),api.loadLang(["hindi","./data/hindi.json"]);var main=document.querySelector(".main"),leading=document.querySelector(".leading"),hero=new Hero(main),article=new ArticleInfo(main),para=new Paragraphs(main,4,[5]),comp=new Compare,interactive=new Interactive(leading,comp),lang=new LanguageSelect(api,main);lang.subscribe(hero.setHero,hero),lang.subscribe(article.setArticleInfo,article),lang.subscribe(lang.render,lang),lang.subscribe(para.setPara,para),lang.subscribe(comp.setCompare,comp),lang.subscribe(interactive.refreshInteractive,interactive),lang.getData("english");